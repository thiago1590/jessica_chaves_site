<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagamento</title>
    <!--Favicon and title-->
    <title>Pagamento</title>
    <link rel="icon" href="https://cdn.icon-icons.com/icons2/881/PNG/512/Grapes_icon-icons.com_68742.png">
    <!--CSS-->
    <link rel="stylesheet" href="/css/ebook/main.css">
    <link rel="stylesheet" href="/css/ebook/register.css">
    <link rel="stylesheet" href="/css/media_queries/ebook/register_responsive.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400&display=swap">

</head>
<body class="preload">

    <div id="container">

        <div id="left-container">
            <div id="content-header">
                <img src="/images/ebook-image.png" id="ebook-image" />
                <div>
                    <h1>Ebook de Receitas</h1>
                    <h1>Jéssica Chaves</h1>
                    <a href="" id="link-details">Detalhes do produto</a>
                    <h2>R$ 39,90</h2>
                </div>
            </div>

                <div id="form">
                    <h3 class="label">Nome Completo</h3>
                    <input class="input" id="input-name" type="text">
                    <input class="input-sm" id="input-name-sm" placeholder="Nome completo" type="text"> <!-- shows at 440px -->

                    <h3 class="label">E-mail</h3>
                    <input class="input" id="input-email" type="email">
                    <input class="input-sm" id="input-email-sm" placeholder="E-mail" type="email"> <!-- shows at 440px -->

                    <h3 class="label">Celular</h3>
                    <input class="input" id="input-cel" type="number">
                    <input class="input-sm" id="input-cel-sm" placeholder="Celular" type="text">
                </div>
                
                <div >
                    <p id="erro"></p>
                </div>
                <a>
                    <button onclick="redirect()" class="btn">
                        <span>Pagamento</span>
                    </button>
                </a>

            <div id="purchase-warning" class="warning">
                <svg style="width: 35px; fill:green" viewBox="0 0 150 150" xmlns="http://www.w3.org/2000/svg"><path d="M75 143c-.3 0-.5 0-.8-.1-8.4-2.5-16.4-6.7-23.8-12.5C32 116 21.1 92.8 21.1 68.4V24c0-1 .5-1.9 1.4-2.3 36.3-19.5 68.6-19.5 104.9 0 .9.5 1.4 1.4 1.4 2.3v44.4c0 24.4-11 47.5-29.3 62-7.4 5.8-15.4 10-23.8 12.5-.2 0-.4.1-.7.1zM26.5 25.6v42.8c0 22.8 10.2 44.4 27.3 57.8 6.6 5.2 13.8 9 21.3 11.4 7.5-2.3 14.6-6.1 21.3-11.4 17.1-13.4 27.3-35 27.3-57.8V25.6c-34.1-17.9-63.3-17.9-97.2 0z"></path><path class="st0" d="M97.9 100.2H52.1c-1.5 0-2.6-1.2-2.6-2.6V60.9c0-1.5 1.2-2.6 2.6-2.6h45.7c1.5 0 2.6 1.2 2.6 2.6v36.6c.1 1.5-1.1 2.7-2.5 2.7zm-43.1-5.3h40.4V63.6H54.8v31.3z"></path><path class="st0" d="M88.7 63.6H61.3c-1.5 0-2.6-1.2-2.6-2.6V50.2c0-9 7.3-16.4 16.4-16.4s16.4 7.3 16.4 16.4v10.7c-.1 1.5-1.3 2.7-2.8 2.7zm-24.8-5.3H86v-8c0-6.1-5-11.1-11.1-11.1s-11.1 5-11.1 11.1v8z"></path></svg>
                <div id="warning-text-wrapper">
                    <p class="warning-purchase-text">Compra 100% Segura</p>
                    <p class="warning-purchase-text">Verificado e protegido</p>
                </div>
            </div>
        </div>

        <div id="right-container">
            <h1>detalhes</h1>
            <p> Este é um ebook de receitas criado com muito carinho para te auxiliar a ter uma vida saudável, obtendo os resultados desejados, com mais flexibilidade e variação no seu plano alimentar. <br> As receitas são divididas nas categorias Funcional, Low Carb, Proteica e Vegana. Todas as receitas levam ingredientes que de alguma forma possam te beneficiar em termos nutricionais e funcionais pra que ocorra uma melhora na inflamação e desintoxicação do organismo que é o que ocorre com a maior parte da população nos dias atuais. <br>
            Caso queira substituir algum ingrediente, fique a vontade em mandar uma mensagem no direct que te auxilio da melhor forma!  <br>
            Me marquem nas receitinhas quando fizerem e bom apetite!</p>
        </div>
    </div>
</body>
</html>

<script>
    $(window).load(function() {
  $("body").removeClass("preload");
    });
</script>

<script>
    function validateEmail(email)  {  
        var atposition=email.indexOf("@");  
        var dotposition=email.lastIndexOf(".");  
        console.log(`email: ${email}`)
        if (atposition<1 || dotposition<atposition+2 || dotposition+2>=email.length){   
        return false;  
        }  
    }

function validateForm() {
    let input_name = document.getElementById('input-name').value
    let input_name_sm = document.getElementById('input-name-sm').value
    let input_email = document.getElementById('input-email').value
    let input_email_sm = document.getElementById('input-email-sm').value
    let input_cel = document.getElementById('input-cel').value
    let input_cel_sm = document.getElementById('input-cel-sm').value

    if(input_name == "" && input_name_sm == "") {
        return "insira seu nome completo"
    }
    else if(input_name.length < 5 && input_name_sm == "") {
        return "insira seu nome completo"
    }
    else if(input_email == "" && input_email_sm == "") {
        return "insira seu email"
    }
    else if(validateEmail(input_email) == false && validateEmail(input_email_sm) == false){
        return "insira um e-mail válido"
    }
    else if(input_cel == "" && input_cel_sm == ""){
        return "insira seu número de celular"
    }
    else if(input_cel.length < 8 && input_cel_sm.length < 8){
        return "insira um número de celular válido"
    }
    else {
        return true
    }
}

function redirect(){
    let validacao = validateForm()
    let input_name = document.getElementById('input-name').value
    let input_name_sm = document.getElementById('input-name-sm').value
    let input_email = document.getElementById('input-email').value
    let input_email_sm = document.getElementById('input-email-sm').value
    let input_cel = document.getElementById('input-cel').value
    let input_cel_sm = document.getElementById('input-cel-sm').value
    let link 
    let name
    let email
    let phone

    if (validacao == true) {
        if(input_email == "") {
            name = input_email_sm
            email = input_email_sm
            phone = input_cel_sm
        }  else {
            name = input_name
            email = input_email  
            phone = input_cel
        }
        link = `/payments/checkout/${email}/39.90`
        
        window.location.href = link;
    } else {
        document.getElementById('erro').innerHTML = validacao
    }
}
</script>